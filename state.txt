// State
class Connected {
  handle() { console.log("Sending data..."); }
}
class Disconnected {
  handle() { console.log("Cannot send data. No connection."); }
}

class NetworkConnection {
  constructor() {
    this.state = new Disconnected();
  }
  setState(state) {
    this.state = state;
  }
  request() {
    this.state.handle();
  }
}

// Client
const connection = new NetworkConnection();
connection.request(); // Disconnected
connection.setState(new Connected());
connection.request(); // Connected
